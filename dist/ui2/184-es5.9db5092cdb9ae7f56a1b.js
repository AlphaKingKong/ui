!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}(self.webpackChunkui2=self.webpackChunkui2||[]).push([[184],{7184:function(t,i,o){"use strict";o.r(i),o.d(i,{UsersModule:function(){return $}});var n=o(8583),a=o(3423),u=o(2790),l=o(3962),s=o(2789),c=o(3679),m=o(2238),d=o(3518),f=o(7716),g=o(6083),p=o(6164),h=o(6324),Z=o(8295),v=o(9983),U=o(7441),q=o(2458),A=o(1095);function k(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," User Name is required."),f.qZA())}function w(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," Email Address is required."),f.qZA())}function T(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," Invalid Email Address."),f.qZA())}function y(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," Work Type is required."),f.qZA())}function _(e,t){1&e&&(f.TgZ(0,"mat-option",18),f._uU(1,"ADMIN"),f.qZA())}function N(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," Role is required."),f.qZA())}function S(e,t){1&e&&(f.TgZ(0,"mat-error",17),f._uU(1," Password is required."),f.qZA())}function C(e,t){if(1&e&&(f.TgZ(0,"mat-form-field"),f._UZ(1,"input",19),f.YNc(2,S,2,0,"mat-error",5),f.qZA()),2&e){var r,i=f.oxw();f.xp6(2),f.Q6J("ngIf",null==i.userForm||null==(r=i.userForm.get("password"))?null:r.hasError("required"))}}var I=function(){var t=function(){function t(r,i,o,n,a,u){e(this,t),this.apiService=r,this.dialogRef=i,this.formBuilder=o,this.localStorageService=n,this.snackBarService=a,this.dialogueData=u}return r(t,[{key:"ngOnInit",value:function(){this.isEdit=!!this.dialogueData,this.setData(this.dialogueData),this.getUserRole()}},{key:"getUserRole",value:function(){var e=this.localStorageService.getItem("user");this.userRole=null==e?void 0:e.role}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"setData",value:function(e){var t={username:this.formBuilder.control(null==e?void 0:e.username,[c.kI.required]),email:this.formBuilder.control(null==e?void 0:e.email,[c.kI.required,c.kI.email]),work_type:this.formBuilder.control(null==e?void 0:e.work_type,[c.kI.required]),role:this.formBuilder.control(null==e?void 0:e.role,[c.kI.required])};this.isEdit||(t.password=this.formBuilder.control(null==e?void 0:e.password,[c.kI.required])),this.userForm=this.formBuilder.group(t)}},{key:"saveUser",value:function(){var e=this,t=this.userForm.value;console.log(t),this.dialogueData?this.apiService.updateUser(t,this.dialogueData._id.$oid).subscribe(function(t){e.dialogRef.close(!0),e.snackBarService.open("User updated successfully",d.dA.Success,void 0,3e3)},function(t){e.snackBarService.open("Something went wrong while updating user. Please try again",d.dA.Error,void 0,3e3)}):this.apiService.createUser(t).subscribe(function(t){e.snackBarService.open("User created successfully",d.dA.Success,void 0,3e3),e.dialogRef.close(!0)},function(t){e.snackBarService.open("Something went wrong while creating user. Please try again",d.dA.Error,void 0,3e3)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Y36(g.s),f.Y36(m.so),f.Y36(c.qu),f.Y36(p.n),f.Y36(h.c),f.Y36(m.WI))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-add-user"]],decls:34,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"width-100"],["matInput","","formControlName","username","type","text","name","username","placeholder","Enter User Name"],["align","start","class","form__error",4,"ngIf"],["matInput","","formControlName","email","type","email","name","email","placeholder","Enter Email Address"],["formControlName","work_type"],["value","CLICK"],["value","PUNCH"],["formControlName","role"],["value","ADMIN",4,"ngIf"],["value","USER"],[4,"ngIf"],["mat-dialog-actions","",2,"float","right"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["align","start",1,"form__error"],["value","ADMIN"],["matInput","","formControlName","password","type","password","name","password","placeholder","Enter Password"]],template:function(e,t){var r,i,o,n,a;(1&e&&(f.TgZ(0,"h1",0),f._uU(1),f.qZA(),f.TgZ(2,"div",1),f.TgZ(3,"form",2),f.TgZ(4,"mat-form-field",3),f._UZ(5,"input",4),f.YNc(6,k,2,0,"mat-error",5),f.qZA(),f.TgZ(7,"mat-form-field",3),f._UZ(8,"input",6),f.YNc(9,w,2,0,"mat-error",5),f.YNc(10,T,2,0,"mat-error",5),f.qZA(),f.TgZ(11,"mat-form-field"),f.TgZ(12,"mat-label"),f._uU(13,"Select Work Type"),f.qZA(),f.TgZ(14,"mat-select",7),f.TgZ(15,"mat-option",8),f._uU(16,"CLICK"),f.qZA(),f.TgZ(17,"mat-option",9),f._uU(18,"PUNCH"),f.qZA(),f.qZA(),f.YNc(19,y,2,0,"mat-error",5),f.qZA(),f.TgZ(20,"mat-form-field"),f.TgZ(21,"mat-label"),f._uU(22,"Select Role"),f.qZA(),f.TgZ(23,"mat-select",10),f.YNc(24,_,2,0,"mat-option",11),f.TgZ(25,"mat-option",12),f._uU(26,"USER"),f.qZA(),f.qZA(),f.YNc(27,N,2,0,"mat-error",5),f.qZA(),f.YNc(28,C,3,1,"mat-form-field",13),f.qZA(),f.qZA(),f.TgZ(29,"div",14),f.TgZ(30,"button",15),f.NdJ("click",function(){return t.onNoClick()}),f._uU(31,"Cancel"),f.qZA(),f.TgZ(32,"button",16),f.NdJ("click",function(){return t.saveUser()}),f._uU(33,"Submit"),f.qZA(),f.qZA()),2&e)&&(f.xp6(1),f.hij("",t.isEdit?"Edit":"Create"," User"),f.xp6(2),f.Q6J("formGroup",t.userForm),f.xp6(3),f.Q6J("ngIf",null==t.userForm||null==(r=t.userForm.get("username"))?null:r.hasError("required")),f.xp6(3),f.Q6J("ngIf",null==t.userForm||null==(i=t.userForm.get("email"))?null:i.hasError("required")),f.xp6(1),f.Q6J("ngIf",null==t.userForm||null==(o=t.userForm.get("email"))?null:o.hasError("email")),f.xp6(9),f.Q6J("ngIf",null==t.userForm||null==(n=t.userForm.get("work_type"))?null:n.hasError("required")),f.xp6(5),f.Q6J("ngIf","SUPER_ADMIN"==t.userRole),f.xp6(3),f.Q6J("ngIf",null==t.userForm||null==(a=t.userForm.get("role"))?null:a.hasError("required")),f.xp6(1),f.Q6J("ngIf",!t.isEdit),f.xp6(4),f.Q6J("disabled",t.userForm.invalid))},directives:[m.uh,m.xY,c._Y,c.JL,c.sg,Z.KE,v.Nt,c.Fj,c.JJ,c.u,n.O5,Z.hX,U.gD,q.ey,m.H8,A.lW,Z.TO],styles:[""]}),t}(),b=o(6627);function x(e,t){1&e&&(f.TgZ(0,"th",14),f._uU(1," User Name "),f.qZA())}function Y(e,t){if(1&e&&(f.TgZ(0,"td",15),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.xp6(1),f.hij(" ",r.username," ")}}function D(e,t){1&e&&(f.TgZ(0,"th",14),f._uU(1," Work Type "),f.qZA())}function E(e,t){if(1&e&&(f.TgZ(0,"td",15),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.xp6(1),f.hij(" ",r.work_type," ")}}function J(e,t){1&e&&(f.TgZ(0,"th",14),f._uU(1," Email Address "),f.qZA())}function Q(e,t){if(1&e&&(f.TgZ(0,"td",15),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.xp6(1),f.hij(" ",r.email," ")}}function B(e,t){1&e&&(f.TgZ(0,"th",14),f._uU(1," Role "),f.qZA())}function R(e,t){if(1&e&&(f.TgZ(0,"td",15),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.xp6(1),f.hij(" ",r.role," ")}}function F(e,t){1&e&&(f.TgZ(0,"th",14),f._uU(1," Actions "),f.qZA())}function z(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"td",15),f.TgZ(1,"button",16),f.NdJ("click",function(){var e=f.CHM(r).$implicit;return f.oxw().openDialog(e)}),f.TgZ(2,"mat-icon",17),f._uU(3,"edit"),f.qZA(),f.qZA(),f.qZA()}}function O(e,t){1&e&&f._UZ(0,"tr",18)}function P(e,t){1&e&&f._UZ(0,"tr",19)}var j,H,M=[{path:"",component:u.O,children:[{path:"",redirectTo:"manage",pathMatch:"full"},{path:"manage",component:(j=function(){function t(r,i){e(this,t),this.apiService=r,this.dialog=i,this.displayedColumns=["username","email","work_type","role","actions"],this.users=[],this.dataSource=new s.by(this.users),this.length=100,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}return r(t,[{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator}},{key:"ngOnInit",value:function(){this.getUsers()}},{key:"getUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.apiService.getUsers(this.pageSize,t+1,"").subscribe(function(t){e.length=t.count,e.users=t.data,e.dataSource=new s.by(e.users)})}},{key:"onPageEvent",value:function(e){this.getUsers(e.pageIndex)}},{key:"openDialog",value:function(e){var t=this;this.dialog.open(I,{width:"500px",data:e}).afterClosed().subscribe(function(e){console.log("The dialog was closed"),e&&t.getUsers()})}}]),t}(),j.\u0275fac=function(e){return new(e||j)(f.Y36(g.s),f.Y36(m.uw))},j.\u0275cmp=f.Xpm({type:j,selectors:[["app-manage-users"]],viewQuery:function(e,t){var r;1&e&&f.Gf(l.NW,5),2&e&&f.iGM(r=f.CRH())&&(t.paginator=r.first)},decls:25,vars:6,consts:[["mat-stroked-button","",2,"float","right",3,"click"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","work_type"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["matListIcon",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(f.TgZ(0,"h2"),f._uU(1,"Users "),f.TgZ(2,"button",0),f.NdJ("click",function(){return t.openDialog()}),f._uU(3,"Create User"),f.qZA(),f.qZA(),f.TgZ(4,"div",1),f.TgZ(5,"table",2),f.ynx(6,3),f.YNc(7,x,2,0,"th",4),f.YNc(8,Y,2,1,"td",5),f.BQk(),f.ynx(9,6),f.YNc(10,D,2,0,"th",4),f.YNc(11,E,2,1,"td",5),f.BQk(),f.ynx(12,7),f.YNc(13,J,2,0,"th",4),f.YNc(14,Q,2,1,"td",5),f.BQk(),f.ynx(15,8),f.YNc(16,B,2,0,"th",4),f.YNc(17,R,2,1,"td",5),f.BQk(),f.ynx(18,9),f.YNc(19,F,2,0,"th",4),f.YNc(20,z,4,0,"td",5),f.BQk(),f.YNc(21,O,1,0,"tr",10),f.YNc(22,P,1,0,"tr",11),f.qZA(),f.TgZ(23,"mat-paginator",12,13),f.NdJ("page",function(e){return t.onPageEvent(e)}),f.qZA(),f.qZA()),2&e&&(f.xp6(5),f.Q6J("dataSource",t.dataSource),f.xp6(16),f.Q6J("matHeaderRowDef",t.displayedColumns),f.xp6(1),f.Q6J("matRowDefColumns",t.displayedColumns),f.xp6(1),f.Q6J("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[A.lW,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,l.NW,s.ge,s.ev,b.Hw,s.XQ,s.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),j)}]}],W=o(4466),$=((H=function t(){e(this,t)}).\u0275fac=function(e){return new(e||H)},H.\u0275mod=f.oAB({type:H}),H.\u0275inj=f.cJS({imports:[[s.p0,l.TU,A.ot,b.Ps,m.Is,Z.lN,v.c,c.UX,U.LD,W.m,n.ez,a.Bz.forChild(M)]]}),H)}}])}();